# PDF Translation App - 取扱説明書

## 目次

1. [概要](#概要)
2. [起動と終了](#起動と終了)
3. [基本操作](#基本操作)
4. [機能詳細](#機能詳細)
5. [設定](#設定)
6. [よくある質問](#よくある質問)

---

## 概要

PDF Translation Appは、英語の技術文書PDFを日本語に翻訳するためのアプリケーションです。
ローカルで動作するAIモデル（Qwen）を使用するため、インターネット接続なしで翻訳が可能です。

### 主な機能

- PDFファイルのアップロードと表示
- 英語→日本語の自動翻訳
- 用語集による翻訳の統一
- PDFの内容に関するAIへの質問
- 翻訳結果のダウンロード

---

## 起動と終了

### 起動方法

```bash
cd ~/PDF_Translation_App
./start.sh
```

起動後、自動的にブラウザが開きます。
開かない場合は http://localhost:5173 にアクセスしてください。

### 終了方法

```bash
./stop.sh
```

または、ターミナルで `Ctrl + C` を押してください。

---

## 基本操作

### 1. PDFのアップロード

1. 画面中央の「ファイルを選択」ボタンをクリック
2. 翻訳したいPDFファイルを選択
3. PDFが読み込まれ、左側に表示されます

### 2. 翻訳の実行

1. PDFアップロード後、画面下部の「翻訳を開始」ボタンをクリック
2. 翻訳中は進捗バーが表示されます
3. 完了すると右側に翻訳結果が表示されます

### 3. ページの移動

- **PDFビューア（左側）**: 「← 前へ」「次へ →」ボタンで移動
- 翻訳結果も連動して切り替わります

### 4. PDFの拡大/縮小

- **−ボタン**: 縮小（最小50%）
- **+ボタン**: 拡大（最大300%）
- **リセット**: 100%に戻す
- 現在の倍率はボタンの間に表示されます

---

## 機能詳細

### 用語集機能

画面右下の「用語集」ボタンをクリックすると、用語集パネルが開きます。

#### 用語の追加

1. 「英語」欄に英語の用語を入力
2. 「日本語」欄に対応する日本語を入力
3. 「追加」ボタンをクリック

#### 用語の検索

- 検索バーに文字を入力すると、英語・日本語の両方から検索できます

#### 用語の並び替え

- ドロップダウンから並び順を選択:
  - 英語 A→Z / Z→A
  - 日本語 あ→ん / ん→あ

#### 用語の削除

- 各用語の右側にある「🗑️」ボタンをクリック

#### 用語集の保存

- 用語集は自動的に保存され、次回起動時も引き継がれます
- 保存先: `backend/data/glossary.json`

---

### 質問機能

PDFの内容についてAIに質問できます。

#### 使い方

1. PDFをアップロードした状態で、画面右下の紫色の「?」ボタンをクリック
2. 質問パネルが開きます
3. 質問を入力し、「質問する」ボタンをクリック
4. AIが回答を生成します（10〜30秒程度）

#### 質問の例

- 「この文書の概要を教えてください」
- 「〇〇とは何ですか？」
- 「主な仕様を要約してください」

#### 質問履歴

- 質問と回答の履歴はパネル内に保存されます
- パネルを閉じると履歴はクリアされます

---

### 翻訳品質の設定

画面右上のコントロールパネルで翻訳品質を選択できます。

| モード | モデル | 特徴 |
|--------|--------|------|
| Fast | Qwen2.5-3B | 高速だが品質は控えめ |
| Balanced | Qwen2.5-7B | 速度と品質のバランス（推奨） |
| High | Qwen3-14B | 最高品質だが処理時間が長い |

※ モードを変更すると、次回の翻訳から適用されます

---

### 再翻訳機
翻訳完了後、コントロールパネルの「再翻訳」ボタンで翻訳をやり直せます。

- 用語集を更新した後の再翻訳に便利
- 品質モードを変更してから再翻訳も可能

---

### 翻訳結果のダウンロード

翻訳完了後、以下の形式でダウンロードできます:

- **原文のみ**: 英語テキストのみ
- **翻訳のみ**: 日本語翻訳のみ
- **両方**: 原文と翻訳を並べて表示

---

## 設定

### ポート番号

デフォルトのポート番号:
- フロントエンド: 5173
- バックエンド: 8002

変更する場合は以下のファイルを編集:
- `frontend/vite.config.ts`
- `backend/main.py`
- `start.sh`

---

## よくある質問

### Q: 起動に時間がかかる

**A**: 初回起動時はAIモデル（約14GB）をダウンロードするため、10〜30分程度かかります。2回目以降は1〜2分で起動します。

### Q: 翻訳が遅い

**A**: 品質モードを「Fast」に変更すると高速化できます。または、ページ数の多いPDFは処理に時間がかかるため、分割してアップロードすることをお勧めします。

### Q: 中国語が混じる

**A**: まれにAIが中国語を出力することがあります。再翻訳ボタンで翻訳し直してください。

### Q: 用語集が反映されない

**A**: 用語集を更新した後は「再翻訳」ボタンをクリックして、翻訳をやり直してください。

### Q: メモリ不足エラー

**A**: Highモード（14Bモデル）はメモリを多く使用します。Balancedモード（7B）に変更してください。推奨メモリは16GB以上です。

### Q: PDFが読み込めない

**A**: 以下を確認してください:
- ファイル形式がPDFであること
- パスワード保護されていないこと
- ファイルが破損していないこと

### Q: 翻訳を中断したい

**A**: 翻訳中に表示される「処理中止」ボタンをクリックしてください。

---

## 画面構成

```
┌─────────────────────────────────────────────────────────┐
│  PDF技術文書 翻訳システム          [Qwen2.5-7B] [M4 Pro] │  ← ヘッダー
├───────────────────────┬─────────────────────────────────┤
│                       │  品質: [Balanced ▼] [再翻訳]    │  ← コントロール
│                       ├─────────────────────────────────┤
│    PDFビューア        │    翻訳結果                     │
│                       │                                 │
│  [← 前へ] 1/7 [次へ→] │    英語 (原文)                  │
│  [−] 100% [+] [リセット]│    ─────────────              │
│                       │    [原文テキスト]               │
│    ┌─────────────┐    │                                 │
│    │             │    │    日本語 (翻訳)                │
│    │   PDF表示   │    │    ─────────────              │
│    │             │    │    [翻訳テキスト]               │
│    └─────────────┘    │                                 │
├───────────────────────┴─────────────────────────────────┤
│  [別のファイルを選択]  [翻訳を開始]  ✓ 翻訳完了 (7ページ) │  ← フッター
└─────────────────────────────────────────────────────────┘
                                              [用語集] ← 右下ボタン
                                              [?]      ← 質問ボタン
```

---

## ショートカット

| 操作 | 説明 |
|------|------|
| ファイルドラッグ&ドロップ | PDFアップロード |

---

## サポート

問題が発生した場合は、以下のログファイルを確認してください:

- `logs/backend.log` - バックエンドのログ
- `logs/frontend.log` - フロントエンドのログ

---

## バージョン情報

- アプリケーションバージョン: 1.0.0
- 対応OS: macOS (Apple Silicon M1/M2/M3/M4)
- 使用モデル: Qwen2.5-7B-Instruct (デフォルト)
